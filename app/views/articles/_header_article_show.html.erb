<div class="row align-items-start">
  <div class="card border-light col-3 bg-light">
    <% if @article.user.avatar.attached? %>
      <%= image_tag(@article.user.avatar, class: 'rounded-circle ms-md-5 ms-0', style: "width: 5em; height: 5em") %>
    <% else %>
      <%= image_tag(asset_path('default_avatar.png'), class: 'rounded-circle ms-md-5 ms-0', style: "width: 5em; height: 5em") %>
    <% end %>

    <div class="ms-md-5 ms-0 clickable">
      <a href="<%= profile_path(@article.user.id) %>">
        <h5><em><%= @article.user.first_name %> <%= @article.user.last_name %></em></h5>
      </a>
    </div>
  </div>

  <div class="col d-flex justify-content-end me-5 mt-2">
    <div class="card border-light col-4 mt-2 bg-light">
      <div class="d-flex justify-content-around bg-light ">

        <% if user_signed_in? %>

          <% if whith_tag(current_user, @article) == "Approved" %>
            <a href="<%= article_tag_path(@article.id, @article.tags.find_by(user: current_user).id) %>" data-method="delete" data-remote="true"><span class="badge badge-fake rounded-pill bg-success" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Approuvé"><span class="iconify" data-icon="mdi:check-bold" style="color: #2c3e50;" data-width="25" data-height="25"></span><span class="badge rounded-pill bg-primary"><%= tag_count(@article)[:approved] %></span></span></a>
          <% else %>
            <a href="<%= article_tags_path(@article.id, :tag_name => "Approved") %>" data-method="post" data-remote="true"><span class="badge badge-fake rounded-pill bg-success" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Approuvé"><span class="iconify" data-icon="mdi:check-bold" style="color: white;" data-width="25" data-height="25"></span><span class="badge rounded-pill bg-primary"><%= tag_count(@article)[:approved] %></span></span>
            </a>
          <% end %>

          <% if whith_tag(current_user, @article) == "Need Review" %>
            <a href="<%= article_tag_path(@article.id, @article.tags.find_by(user: current_user).id) %>" data-method="delete" data-remote="true"><span class="badge badge-fake rounded-pill bg-warning" data-bs-toggle="tooltip" data-bs-placement="bottom" title="À Retravailler"><span class="iconify" data-icon="jam:write-f" style="color: #2c3e50;" data-width="25" data-height="25"></span><span class="badge rounded-pill bg-primary"><%= tag_count(@article)[:need_review] %></span></span></a>
          <% else %>
            <a href="<%= article_tags_path(@article.id, :tag_name => "Need Review") %>" data-method="post" data-remote="true"><span class="badge badge-fake rounded-pill bg-warning" data-bs-toggle="tooltip" data-bs-placement="bottom" title="À Retravailler"><span class="iconify" data-icon="jam:write-f" style="color: white;" data-width="25" data-height="25"></span><span class="badge rounded-pill bg-primary"><%= tag_count(@article)[:need_review] %></span></span></a>
          <% end %>

          <% if whith_tag(current_user, @article) == "Not Approved" %>
            <a href="<%= article_tag_path(@article.id, @article.tags.find_by(user: current_user).id) %>" data-method="delete" data-remote="true"><span class="badge badge-fake rounded-pill bg-danger" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Non Approuvé"><span class="iconify" data-icon="emojione-monotone:cross-mark" style="color: #2c3e50;" data-width="30" data-height="25"></span><span class="badge rounded-pill bg-primary"><%= tag_count(@article)[:not_approved] %></span></span></a>
          <% else %>
            <a href="<%= article_tags_path(@article.id, :tag_name => "Not Approved") %>" data-method="post" data-remote="true"><span class="badge badge-fake rounded-pill bg-danger" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Non Approuvé"><span class="iconify" data-icon="emojione-monotone:cross-mark" style="color: white;" data-width="30" data-height="25"></span><span class="badge rounded-pill bg-primary"><%= tag_count(@article)[:not_approved] %></span></span></a>
          <% end %>

        <% else %>
          <a href="<%= article_tags_path(@article.id) %>" data-method="post"><span class="badge badge-fake rounded-pill bg-success" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Approuvé"><span class="iconify" data-icon="mdi:check-bold" style="color: white;" data-width="25" data-height="25"></span><span class="badge rounded-pill bg-primary"><%= tag_count(@article)[:approved] %></span></span></a>
          <a href="<%= article_tags_path(@article.id) %>" data-method="post"><span class="badge badge-fake rounded-pill bg-warning" data-bs-toggle="tooltip" data-bs-placement="bottom" title="À Retravailler"><span class="iconify" data-icon="jam:write-f" style="color: white;" data-width="25" data-height="25"></span><span class="badge rounded-pill bg-primary"><%= tag_count(@article)[:need_review] %></span></span></a>
          <a href="<%= article_tags_path(@article.id) %>" data-method="post"><span class="badge badge-fake rounded-pill bg-danger" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Non Approuvé"><span class="iconify" data-icon="emojione-monotone:cross-mark" style="color: white;" data-width="30" data-height="25"></span><span class="badge rounded-pill bg-primary"><%= tag_count(@article)[:not_approved] %></span></span></a>
        <% end %>
        <a href="<%= help_path %>" target="_blank"><span class="badge badge-help rounded-pill bg-primary" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Comment ça marche?"><span class="iconify badge-help" data-icon="mdi:help"></span></span></a>
      </div>
      <div class="d-flex justify-content-end me-4 mt-5 bg-light">
        <h5><a href="<%= category_path(@article.category.id) %>" style="text-decoration: none; color: black;"><%= @article.category.name %></a></h5>
                <% if user_signed_in? && current_user.admin%>
                <a href="<%= article_path(@article.id) %>" data-confirm="Voulez vous vraiment supprimer cet article ?" data-method="delete" class="text-danger hover ms-3" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Supprimer l'article"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1.7em" height="1.7em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 16 16"><path d="M2 5v10c0 .55.45 1 1 1h9c.55 0 1-.45 1-1V5H2zm3 9H4V7h1v7zm2 0H6V7h1v7zm2 0H8V7h1v7zm2 0h-1V7h1v7z" fill="currentColor"/><path d="M13.25 2H10V.75A.753.753 0 0 0 9.25 0h-3.5A.753.753 0 0 0 5 .75V2H1.75a.752.752 0 0 0-.75.75V4h13V2.75a.752.752 0 0 0-.75-.75zM9 2H6v-.987h3V2z" fill="currentColor"/></svg></a>
                <%end%>
      </div>
    </div>
  </div>
</div>

